<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>modbus::IModbusManager class | modbus-cpp</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+doxygen.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">modbus-cpp</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespacemodbus.html">modbus</a>::</span>IModbusManager <span class="m-thin">class</span>
        </h1>
        <p>Main entry point of modbus-cpp.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-static-methods">Public static functions</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Use <a href="classmodbus_1_1IModbusManager.html#a864a8c8ad600238633b53cca82ec4c20" class="m-dox">create(std::<wbr />shared_ptr&lt;Logger&gt; logger)</a> or <a href="classmodbus_1_1IModbusManager.html#a1f40a032244ad2741355322872cc2442" class="m-dox">create(std::<wbr />shared_ptr&lt;Logger&gt; logger, unsigned int number_of_threads)</a> to effectively create an instance of this class.</p><p>Once you get an instance of this class, one or multiple background threads will be running to execute all the Modbus I/O.</p><p>From this class, you can create a channel using <a href="classmodbus_1_1IModbusManager.html#a45535fc7201915b5955e9ddac3db5717" class="m-dox">create_tcp_channel(const std::<wbr />string&amp; name, const Ipv4Endpoint&amp; endpoint)</a> from which you will be able to create sessions.</p>
        <section id="pub-static-methods">
          <h2><a href="#pub-static-methods">Public static functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">static auto <a href="#a864a8c8ad600238633b53cca82ec4c20" class="m-dox">create</a>(</span><span class="m-dox-wrap">std::shared_ptr&lt;Logger&gt; logger) -&gt; std::unique_ptr&lt;<a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>&gt;</span>
            </dt>
            <dd>Creates an instance of <a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">static auto <a href="#a1f40a032244ad2741355322872cc2442" class="m-dox">create</a>(</span><span class="m-dox-wrap">std::shared_ptr&lt;Logger&gt; logger,
              unsigned int number_of_threads) -&gt; std::unique_ptr&lt;<a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>&gt;</span>
            </dt>
            <dd>Creates an instance of <a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper"><a href="#afa48a44c592e174834a69012ab838bee" class="m-dox">~IModbusManager</a>(</span><span class="m-dox-wrap">) <span class="m-label m-flat m-info">defaulted</span> <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Destructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#a45535fc7201915b5955e9ddac3db5717" class="m-dox">create_tcp_channel</a>(</span><span class="m-dox-wrap">const std::string&amp; name,
              const <a href="classmodbus_1_1Ipv4Endpoint.html" class="m-dox">Ipv4Endpoint</a>&amp; endpoint) -&gt; std::shared_ptr&lt;<a href="classmodbus_1_1IChannel.html" class="m-dox">IChannel</a>&gt; <span class="m-label m-flat m-warning">pure virtual</span></span>
            </dt>
            <dd>Create a TCP channel.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ae57c5cb74f6f170be0d5c014af3d96fa" class="m-dox">shutdown</a>(</span><span class="m-dox-wrap">) <span class="m-label m-flat m-warning">pure virtual</span></span>
            </dt>
            <dd>Closes all the associated channels and sessions and join all the background threads.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-dox-details" id="a864a8c8ad600238633b53cca82ec4c20"><div>
            <h3>
              <span class="m-dox-wrap-bumper">static std::unique_ptr&lt;<a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>&gt; modbus::<wbr />IModbusManager::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a864a8c8ad600238633b53cca82ec4c20" class="m-dox-self">create</a>(</span><span class="m-dox-wrap">std::shared_ptr&lt;Logger&gt; logger)</span></span>
            </h3>
            <p>Creates an instance of <a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">logger</td>
                  <td>Logger to use for all the operations</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Unique pointer to an instance of <a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a></td>
                </tr>
              </tfoot>
            </table>
<p>This function will create the number of threads returned by <code class="m-code"><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">::</span><span class="n">hardware_concurrency</span></code>. It is usually a good default value.</p><p>The returned instance can safely be put in a <code class="m-code"><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span></code> if necessary.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classmodbus_1_1LoggerFactory.html" class="m-dox">LoggerFactory</a></p></aside>
          </div></section>
          <section class="m-dox-details" id="a1f40a032244ad2741355322872cc2442"><div>
            <h3>
              <span class="m-dox-wrap-bumper">static std::unique_ptr&lt;<a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>&gt; modbus::<wbr />IModbusManager::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a1f40a032244ad2741355322872cc2442" class="m-dox-self">create</a>(</span><span class="m-dox-wrap">std::shared_ptr&lt;Logger&gt; logger,
              unsigned int number_of_threads)</span></span>
            </h3>
            <p>Creates an instance of <a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a>.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">logger</td>
                  <td>Logger to use for all the operations</td>
                </tr>
                <tr>
                  <td>number_of_threads</td>
                  <td>Number of threads to use by the library</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Unique pointer to an instance of <a href="classmodbus_1_1IModbusManager.html" class="m-dox">IModbusManager</a></td>
                </tr>
              </tfoot>
            </table>
<p>The number of threads to use is often found by trial and error. It depends on the machine used, as well as the number of active channels and their polling frenquency. A good start is usually</p><pre class="m-code"> <span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">::</span><span class="n">hardware_concurrency</span> <span class="err">@</span><span class="n">ece</span><span class="p">.</span>

<span class="n">The</span> <span class="n">returned</span> <span class="n">instance</span> <span class="n">can</span> <span class="n">safely</span> <span class="n">be</span> <span class="n">put</span> <span class="n">in</span> <span class="n">a</span> <span class="err">@</span><span class="n">code</span><span class="p">{.</span><span class="n">cpp</span><span class="p">}</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span></pre><p>if necessary.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classmodbus_1_1LoggerFactory.html" class="m-dox">LoggerFactory</a></p></aside>
          </div></section>
          <section class="m-dox-details" id="afa48a44c592e174834a69012ab838bee"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> modbus::<wbr />IModbusManager::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#afa48a44c592e174834a69012ab838bee" class="m-dox-self">~IModbusManager</a>(</span><span class="m-dox-wrap">) <span class="m-label m-warning">virtual</span> <span class="m-label m-info">defaulted</span></span></span>
            </h3>
            <p>Destructor.</p>
<p>When destroyed, it will effectively call <a href="classmodbus_1_1IModbusManager.html#ae57c5cb74f6f170be0d5c014af3d96fa" class="m-dox">shutdown()</a>.</p><aside class="m-note m-danger"><h4>Warning</h4><p>When this destructor is called, it will effectively close all the channels and their associated sessions. However, since operations may still be queued in other threads and that all the threads are gracefully ended, it may take some time to completely join all the threads.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="classmodbus_1_1IModbusManager.html#ae57c5cb74f6f170be0d5c014af3d96fa" class="m-dox">shutdown()</a></p></aside>
          </div></section>
          <section class="m-dox-details" id="a45535fc7201915b5955e9ddac3db5717"><div>
            <h3>
              <span class="m-dox-wrap-bumper">std::shared_ptr&lt;<a href="classmodbus_1_1IChannel.html" class="m-dox">IChannel</a>&gt; modbus::<wbr />IModbusManager::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a45535fc7201915b5955e9ddac3db5717" class="m-dox-self">create_tcp_channel</a>(</span><span class="m-dox-wrap">const std::string&amp; name,
              const <a href="classmodbus_1_1Ipv4Endpoint.html" class="m-dox">Ipv4Endpoint</a>&amp; endpoint) <span class="m-label m-warning">pure virtual</span></span></span>
            </h3>
            <p>Create a TCP channel.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">name</td>
                  <td>Name associated with the channel. This name will appear in the logs.</td>
                </tr>
                <tr>
                  <td>endpoint</td>
                  <td>IPv4 endpoint to which the channel will be connected.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Shared pointer of a <a href="classmodbus_1_1IChannel.html" class="m-dox">IChannel</a> instance.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-info"><h4>Note</h4><p>The returned channel instance is shared with the internal of the library. If you release the shared pointer, it will be kept alive by the internal of the library. The channel will be effectively destroyed when <a href="classmodbus_1_1IModbusManager.html#ae57c5cb74f6f170be0d5c014af3d96fa" class="m-dox">shutdown</a> is called.</p></aside>
          </div></section>
          <section class="m-dox-details" id="ae57c5cb74f6f170be0d5c014af3d96fa"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void modbus::<wbr />IModbusManager::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ae57c5cb74f6f170be0d5c014af3d96fa" class="m-dox-self">shutdown</a>(</span><span class="m-dox-wrap">) <span class="m-label m-warning">pure virtual</span></span></span>
            </h3>
            <p>Closes all the associated channels and sessions and join all the background threads.</p>
<p>All the associated channels and sessions are gracefully shutdown and the threads are joined.</p><aside class="m-note m-danger"><h4>Warning</h4><p>This method effectively blocks until all the background threads are joined. It can be a source of deadlocks if the client code is blocked in a callback.</p></aside>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <input type="search" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" />
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            Search for symbols, directories, files, pages or modules. You can omit any
            prefix from the symbol or file path; adding a <code>:</code> or <code>/</code>
            suffix lists all members of given symbol or directory. Navigate through the
            list using <span class="m-label m-dim">&darr;</span> and
            <span class="m-label m-dim">&uarr;</span>, press
            <span class="m-label m-dim">Enter</span> to go.
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>modbus-cpp. Created by <a href="http://doxygen.org/">Doxygen</a> 1.8.13 and <a href="http://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>